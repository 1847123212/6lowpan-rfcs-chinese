阅读笔记：

1、IEEE802.15.4网络支持星型和网状（mesh）拓扑。然而，不管是802.15.4还是6lowpan都没有定义如何获取和维持mesh拓扑。所以，6lowpan形成和多跳路由可以被IP层下面的层（适配层或是逻辑链路控制LLC）或是IP层所支持。

需要注意的：在IETF中，术语“routing”常常，而不是总是，专门涉及IP层上路径和转发的形成。在本文档，我们通过术语“route-over”和“mesh-under”来区别那些在该层所执行的服务。

2、特定应用的特征影响了6lowpan路由要求和相关的解决方案。但是，多样的应用可以通过相似的技术特征进行规范，尽管相关细节可能是不同的。

本文档陈述了6lowpan应用一般的路由需求，提供了路由的不同案例。它并不是说一种单一的路由方案将会适合所有6lowpan应用，而且，也并不需要不同的路由协议同时运行。

3、除了各种各样的6lowpan的路由算法，在ip层（route-over）或是ip层的下层（mesh-under）进行路由也是可能的。

route-over方法依赖IP路由，所以支持在各种联网设别进行路由。注意：Roll工作组正在为LLNs开发route-over方法，并不限于6lowpan。

Mesh-under在IP连接之下进行多跳通信。该机制最重要的成果：IEEE802.15.4的特征直接影响了6lowpan路由机制，包括使用64位或是16位链路层地址而不是IP地址。一个6lowpan网络进而可能被看做一个单一的IP连接。

 

3.1 参考网络模型

对于6lowpan中的多跳通信，当使用route-over机制时，所有的路由器，如6lowpan边界路由器（6LBRs）和6lowpan路由器（6LRs），在末端网络中进行IP路由。在这种情况下，链路本地区域覆盖某一节点的均衡无线范围内的一簇节点。

当一个lowpan遵循mesh-under配置时，在lowpan网络中，6LBR是唯一的IPv6路由器。这就意味着IPv6链路本地区域包括所有Lowpan中的节点。对于这个，一种mesh-under机制必须被提供来支持多跳传输。

并非所有相互处于无线电范围的设备需要是同一个LoWPAN的一部分。当多个LoWPAN通过6Lowpan中全球唯一IPv6地址形成，lowpan A中设备a想与lowpan B 中的设备b通信，将会使用到正规的IPV6机制。对于route-over，b的IPv6地址作为数据包的目的地址，对于发出的数据包设备执行到6LBR的IP路由。对于mesh-under，从a到A的6LBR IP路由只有一跳，无论他们之间相距多少无线跳数。当然，这要假设存在一种mesh-under路由协议，为了达到6LBR。注意一个默认到6LBR的路由应当放进6lowpan路由系统，不过是route-over还是mesh-under

 

4、方案考虑和6lowpan路由参数

致力于传感网络领域的研究已经产生很多多跳路由算法。大部分相关的工作集中在针对特定应用方案对路由进行优化。

依赖于LoWPAN拓扑和运行其上的应用，可能会使用不同类型的路由。然而，本文档抽象自特定应用通信，并且描述lowpan网络的一般路由需求。

列出了一些参数，用来描述特定方案：（略翻）

A、网络属性：

         设备数量、密度和网络直径：这些参数常常直接影响路由状态。

连通性：由于外在因素或是计划中的非连接，一个Lowpan网络可以处于几个连通状态，从“总是连通”到“很少连通”。这对于动态路由发现是一个巨大的挑战。

动态（包括移动性）：由于不可预测的外在因素或是可控移动，位置改变可能会增加，这反过来引起路由改变。节点可以动态的加入到一个LoWPAN，也可以离开。路由状态和控制信息量或与很大程度上依赖于移动节点的数量、速度和环境造成的无线信号的改变。

部署、调度；节点和网关的部署；流量形式、拓扑和应用；服务级别；安全

B、节点参数:

         处理速度和存储空间；能量消耗和能量来源；传输范围；流量形式

C、链路参数：

         应用于IEEE802.15.4继承模式的链路参数。

         吞吐量:不同频带，不同地址模式下的传送速率

         延时:不通频带，不同地址模式下的延时

注意到以上呈现的参数被用在链路或是节点评估指标。然而，多标准路由或许并不适用于6lowpan节点。相对而言，多种单标准指标是可行的，可以被选择来适合环境或是应用。

 

5、6lowpan路由需求

对于低功耗网络，一项重要的设计属性：lowpan网络必须支持多种设备类型和角色，如：能量受限节点（靠电池供电）、mains-powered host nodes、高性能网关、各种功能节点（中继、本地管理/协调器等）。

针对不同设备类型和角色，lowpan网络需要考虑一下两点基础属性：能量管理和低性能。

5.1 6lowpan设备所支持的属性

每个属性的重要性在于协议所运行的节点类型以及节点所扮演的角色。

接下来的需求考虑的是lowpans中电池供电节点：

【R01】6lowpan路由协议应当允许以小代码量实现，低路由状态来适应典型的6lowpan节点能力。一般来说，代码量受可用flash存储空间的限制，路由表受到RAM大小的限制，可能限制在小于32个条目。

【R02】通过有效的使用控制数据包（例如代价昂贵的IP多播），和有效的路由数据包，6lowpan路由协议应当实现最低能量消耗。

由于多播可能引起lowpan网络中洪泛，所以6lowpan路由协议应当最小化通过多播路由包实现的控制代价。

 

5.2、6lowpan链路支持属性

6lowpan链路具有低数据率和高丢包率。

【R03】6lowpan路由协议控制信息不应当超过单个IEEE802.15.4帧大小，为了避免分片和重组。这也可以降低传输所需的能量，避免不必要的带宽和数据包的重组。

【R04】lowpans的路由协议设计必须考虑这样的事实：依据应用的需求，数据包可以被充足的传送。一系列端到端数据包的传送率需求的变化，依赖于应用。

【R05】延时需求

【R06】6lowpan路由协议应当是健壮的，对于由于链路失败或是设备不可达引起的动态丢失，原因可能是短期的（30ms）--由于接收信号强度指示变化、噪音和异步，也可能是长期的，由于能量耗尽、硬件坏掉、操作系统的错误行为等。

 

5.3、6lowpan特征支持

6lowpan可以在不同规模和拓扑下部署，适应多变的移动模型，暴露在不同级别的干扰中等。在任何情况下，Lowpans必须维持低功耗。这一节描述6lowpans的网络特性。

【R08】6lowpan路由协议的设计应当考虑一些节点在某些时间段可能是不可靠的，由于周期性的休眠。

Lowpan环境中的很多节点或许周期性的休眠（关掉收发器）为了节省能量。所以，路由协议必须确保数据包传送的健壮性，尽管节点频繁的关掉无线收发接口。来自IEEE802.15.4低层的反馈可能被考虑来加强6lopan路由协议的能量意识。

在许多IEEE802.15.4部署中，和其他的无线低功耗技术，转发者为mains-powered设备（不需要休眠）。然而，他不可能保证所有的转发者是mians-powered。解决这一状况的路由协议应当提供一种模式，能量消耗应当是一个度量标准。另外，在节能模式的节点的用于转发可能增加延迟，降低数据包传递的成功率。

【R09】6lowpan路由协议使用的度量标准对于低层提供的不同输入应当提供一些灵活性，对于优化路径选择提供其他的测算方法，考虑能量平衡和链路质量的情况下。

简单的跳数度量机制或许是低效的在6lowpan中。通过考虑IEEE802.15.4提供的LQI和RSSI，或许会有更好的度量标准。使用的度量标准或许依赖于应用和需求

【R12】6lowpan路由协议应当能够动态适应拓扑和移动节点。

【R13】6lowpan路由协议应当支持多种流量形式，点对点、点对多点和多点对点，同时要避免过度的多播流量。

 

 

5.4、安全性支持

略

 

5.5、mesh-under转发支持

一个lowpan网络或许被当作一个IPv6连接创建。在这种情况下，必须支持mesh-under路由机制。尽管本文档提供一般的、指导性的6lowpan路由设计，但本节中的需求特定于第二层。本小节需求的描述允许路由方案的优化和正确操作，考虑了mesh-under配置的特定特征。

【R15】mesh-under需要开发一种运行于IP层之下的路由协议。这种协议必须支持16位的短地址和64位的扩展MAC地址。

【R16】为了执行邻居发现和维持，lowpan节点应当避免发送separate “hello“信息。相反，链路层机制（如确认）或许可以用来追踪活动的邻居。

例如，一个帧传送后接收确认可能引起不必要的明确的hello信息的传送。更一般的来说，任何被节点接收到的帧可以作为一个评估连通性的输入，在发送方和接收方间。

【R17】如果路由协议功能包括了IP多播，那么它可以采用有效分布的网络结构，为了最小化链路层广播。

 

5.6、管理支持

本节提供关于6lowpan路由协议的管理需求。

【R18】

 

6、安全考虑

8、参考

8.1、标准参考

8.2、信息参考

6lowpan路由发现优化，现已成为标准文档，RFC6775

Chen：Ad-hoc multicastRouting on Resource-Limited Sensor Nodes，引用在：应当引入LQI、RSSI作为链路度量标准，而不是单单依靠跳数。

RFC5826：低功耗有损网络中家具自动化领域路由需求


翻译：frank_jb 20150506

水平有限，不当处望指正，详细可参见原文档